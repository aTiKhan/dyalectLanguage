/*func Integer + (n) {
    self * n
}

Integer: func toString(){
    "[" + self + "]"
}

var x = 12.0;

x:multiply(12, 3)

x multiply(12, 3)

if x > 0 {
    x *= 12.3456
}

{
    var x = "Yeah-whooo!";
    print(x)
}


func Float multiply(x,y) {
    var res = self * (x - y);

    if res < 0 {
        return -res;
    }
    else {
        return res;
    }
}

var x = 12.0

x.multiply(34, 26);



func setterHelper(arr,i,val) {
    if i > 1000 {
        arr[i] = val
    }
    else {
        "We're saved!"
    }
}


func setter(arr,i,val) {
    setterHelper(arr,i,val)
}

var t = (1,2,3)

setter(t, 1, "oops")

func iter(n, act) {
    if n > 0 {
        act(n)
        iter(n - 1, act)
    }
}

iter(6000, n => print("Running ", n))


var arr = makeList(1000000)
var iter = arr.iterator()
print(iter)
var el

while (el = iter())[0] {
    
}

print("Finished!")
*/

var arr = makeList(100)

func testIter(n) {
    yield 1
    yield 22
    yield 14
    yield 3

    while n > 0 {
        n -= 1
        yield n
    }

    print ("Basta!")
}

func Iterator.where(pred) {
    for e in self {
        if pred(e) {
            yield e
        }
    }
}

func Iterator.select(fun) {
    for e in self {
        yield fun(e)
    }
}

func Iterator.print() {
    var str = "["
    var fst = true
    for e in self {
        if !fst {
            str += ","
        }
        str += e.toString()
        fst = false
    }

    str += "]"
}

arr
    .iterator()
    .where(x => x % 2 == 0)
    .select(x => x * 2)
    .where(x => x > 100)
    .select(x => "value:" + x)
    .print()
