/*func Integer + (n) {
    self * n
}

Integer: func toString(){
    "[" + self + "]"
}

var x = 12.0;

x:multiply(12, 3)

x multiply(12, 3)

if x > 0 {
    x *= 12.3456
}

{
    var x = "Yeah-whooo!";
    print(x)
}


func Float multiply(x,y) {
    var res = self * (x - y);

    if res < 0 {
        return -res;
    }
    else {
        return res;
    }
}

var x = 12.0

x.multiply(34, 26);



func setterHelper(arr,i,val) {
    if i > 1000 {
        arr[i] = val
    }
    else {
        "We're saved!"
    }
}


func setter(arr,i,val) {
    setterHelper(arr,i,val)
}

var t = (1,2,3)

setter(t, 1, "oops")

func iter(n, act) {
    if n > 0 {
        act(n)
        iter(n - 1, act)
    }
}

iter(6000, n => print("Running ", n))


var arr = makeList(1000000)
var iter = arr.iterator()
print(iter)
var el

while (el = iter())[0] {
    
}

print("Finished!")

var arr = makeList(100)

func testIter(n) {
    yield 1
    yield 22
    yield 14
    yield 3

    while n > 0 {
        n -= 1
        yield n
    }

    print ("Basta!")
}

func Iterator.where(pred) {
    for e in self {
        if pred(e) {
            yield e
        }
    }
}

func Iterator.select(fun) {
    for e in self {
        yield fun(e)
    }
}

func Iterator.print() {
    var str = "["
    var fst = true
    for e in self {
        if !fst {
            str += ","
        }
        str += e.toString()
        fst = false
    }

    str += "]"
}

arr
    .iterator()
    .where(x => x % 2 == 0)
    .select(x => x * 2)
    .where(x => x > 100)
    .select(x => "value:" + x)
    .print()

arr(1,2,3)


func Iterator.select(fn) {
    var idx = 0;
    for x in self {
        yield fn(idx, x)
        idx += 1
    }
}

func Iterator.toArray() {
    var arr = []
    for x in self {
        arr.add(x)
    }
    arr
}

var arr = [1,2,3,4,5]

arr
    .iter()
    .select((i,x) => x if i < 6 else i * x) //$1 if $0 < 3 else $0 * $1)
    .toArray()

func fizzbuzzTest() {
    var n = 1
    var acc = ""
    while n < 11 {
        if n % 15 == 0 {
            acc = acc + "fizzbuzz"
        } else if n % 3 == 0 {
            acc = acc + "fizz"
        } else if n % 5 == 0 {
            acc = acc + "buzz"
        } else {
            acc = acc + n
        }
        n = n + 1
    }
    acc
}

func fizzbuzzTest1() {
    var n = 1
    var acc = ""
    while n < 11 {
        acc += 
            "fizzbuzz" ? n % 15 == 0 :
            "fizz"     ? n % 3  == 0 :
            "buzz"     ? n % 5  == 0 :
            n
        n += 1
    }
    acc
}

print(fizzbuzzTest())
print(fizzbuzzTest1())


func format(fmt, args...) {
    var str = fmt
    for x in args {
        str += x + ","
    }
    str
}

//format("Values are: ", 1,2,3,4,5,6,7)

func fetch() { 
    yield 22 * 1.25
    yield "Hello, world!"
    yield (1,2,3)
    yield true  
}

for x in fetch() {
    print(x)
*/
func String.reverse () {
    var len = #self
    var ret = ""
    while len > 0 {
        ret += self[len - 1]
        len -= 1
    }
    ret
}

func String.let(fn) {
    fn(self)
}

"original".let(str => {
    
})