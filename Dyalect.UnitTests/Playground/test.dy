type Foo(var x, var y, var z) with Collection

func get Foo[index] {
    match index {
        >2 or <0 => @IndexOutOfRange(index),
        _ => rawget(this, index)
    }
}
func set Foo[index, value] {
    match index {
        >2 or <0 => @IndexOutOfRange(index),
        _ => rawset(this, index, value)
    }
}

let f = Foo(1, 2, 3)
assert(2, f[1])
f[1] = 1024
assert(1024, f[1])